<div class="pageTitle">My Visits</div>

<div class="content-container">

  <div class="card">
      <mat-card>
          <mat-card-content>

            <!-- <div [class]="this.visits.length == 0 ? 'showResults':'noResults'" style="width: 100%; text-align: center; padding-bottom: 2em;">
              <p style="font-size: 1.5em; font-weight: 300;">You currently have no visits scheduled</p>
              <a href="#" routerLink="/submitvisit" style="font-size: 1.2em; text-decoration: none; font-weight: 400;">Submit new notification</a>
            </div>
            <div [class]="this.visits.length > 0 ? 'showResults':'noResults'"> -->

            <!-- [class]="this.visits.length > 0 ? 'showResults':'noResults'" -->
            <div [class]="this.visitsClass">

              <h3>List of your scheduled visits</h3>
              <mat-hint>For past visits, contact the administrator of the destination that you visited. Use the help, in the main menu bar, to find the appropriate administrator. </mat-hint>
              <table mat-table [dataSource]="dataSource" style="margin-top:15px;" matSort>
  
                <!-- Classification-->
                <ng-container matColumnDef="visit_classification_full">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header>Classification</th>
                  <td mat-cell *matCellDef="let row">{{row.visit_classification_full}}</td>
                </ng-container>
              
                <!-- Destination Column -->
                <ng-container matColumnDef="location_name">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Destination </th>
                  <td mat-cell *matCellDef="let element"> {{element.location_name}} </td>
                </ng-container>
              
                <!-- Arrival Date Column -->
                <ng-container matColumnDef="visit_start_dt_display">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Arrival Date </th>
                  <td mat-cell *matCellDef="let element"> {{element.visit_start_dt_display}} {{ element.visit_start_time+'Z' }}</td>
                </ng-container>
              
                <!-- Departure Date Column -->
                <ng-container matColumnDef="visit_end_dt_display">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header> Departure Date </th>
                  <td mat-cell *matCellDef="let element"> {{element.visit_end_dt_display}} {{ element.visit_end_time+'Z'}}</td>
                </ng-container>
              
                <!-- Edit Column -->
                <ng-container matColumnDef="edit">
                  <th mat-header-cell *matHeaderCellDef> Edit </th>
                  <td mat-cell *matCellDef="let element" id="editData" (click)="editVisitNotification(element)"> <span matTooltip="Edit Visit"><i class="fas fa-edit"></i></span> </td>
                </ng-container>     
                
                <!-- Cancel Column -->
                <ng-container matColumnDef="cancel">
                  <th mat-header-cell *matHeaderCellDef> Cancel </th>
                  <td mat-cell *matCellDef="let element" id="deleteData" (click)="cancelVisit(element)"> <span matTooltip="Cancel Visit"><i class="fas fa-times-circle"></i></span> </td>
                </ng-container>
                
                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
              </table>
              <mat-paginator [pageSizeOptions]="[25, 50, 100]"
                    showFirstLastButtons id="paginator">
              </mat-paginator>
            </div>
            <div [class]="this.noVisitsClass"  style="width: 100%; text-align: center; padding-bottom: 2em;">
              <p style="font-size: 1.5em; font-weight: 300;">You currently have no visits scheduled</p>
              <a href="#" routerLink="/submitvisit" style="font-size: 1.2em; text-decoration: none; font-weight: 400;">Submit new notification</a>
            </div>
          </mat-card-content>
      </mat-card>
  </div>
</div>


<!-- Begin Dialog/Modal Cancel Visit -->
<ng-template #cancelConfirmationDialog>
  <div style="width: 450px;">
    <h2 mat-dialog-title><i class="far fa-calendar-times" style="margin-right: 5px;"></i>Cancel Confirmation</h2>
    <mat-dialog-content class="mat-typography" style="padding-bottom: 1em;">
      Are you sure you want to cancel this visit? A cancellation confirmation email will be sent to all parties.
    </mat-dialog-content>
      <mat-dialog-actions align="end">
        <button mat-stroked-button mat-dialog-close>Never mind, close</button>
        <button mat-button type="submit" [mat-dialog-close]="true" (click)="confirmCancel()">Yes, cancel</button>
      </mat-dialog-actions>
  </div>
</ng-template>
<!-- End Dialog/Modal Cancel Visit -->
